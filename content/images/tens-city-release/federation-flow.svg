<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" width="600" height="320" viewBox="0 0 500 267">
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#666"/>
    </marker>
    <marker id="arrow-blue" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#3498db"/>
    </marker>
    <marker id="arrow-green" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#27ae60"/>
    </marker>
  </defs>
  <rect width="100%" height="100%" rx="12" fill="#f8f9fa" stroke="#999" stroke-width="1"/>
  <text x="250" y="20" font-family="Arial" font-size="12" font-weight="bold" fill="#333" text-anchor="middle">ActivityPub Federation</text>
  <g transform="translate(20, 40)">
    <rect x="0" y="0" width="140" height="100" rx="8" fill="#e8f4fd" stroke="#3498db" stroke-width="2"/>
    <text x="70" y="20" font-family="Arial" font-size="10" font-weight="bold" fill="#3498db" text-anchor="middle">Your Blog</text>
    <text x="70" y="35" font-family="monospace" font-size="8" fill="#666" text-anchor="middle">blog.example.com</text>
    <rect x="10" y="45" width="120" height="20" rx="3" fill="white" stroke="#3498db" stroke-width="1"/>
    <text x="70" y="58" font-family="monospace" font-size="7" fill="#333" text-anchor="middle">@author@blog.example.com</text>
    <text x="70" y="80" font-family="Arial" font-size="7" fill="#666" text-anchor="middle">Actor + Outbox + Inbox</text>
    <text x="70" y="92" font-family="Arial" font-size="7" fill="#666" text-anchor="middle">HTTP Signatures</text>
  </g>
  <g transform="translate(340, 40)">
    <rect x="0" y="0" width="140" height="100" rx="8" fill="#fce4ec" stroke="#e74c3c" stroke-width="2"/>
    <text x="70" y="20" font-family="Arial" font-size="10" font-weight="bold" fill="#e74c3c" text-anchor="middle">Mastodon</text>
    <text x="70" y="35" font-family="monospace" font-size="8" fill="#666" text-anchor="middle">mastodon.social</text>
    <circle cx="40" cy="65" r="12" fill="white" stroke="#e74c3c" stroke-width="1"/>
    <text x="40" y="69" font-family="Arial" font-size="10" text-anchor="middle">u</text>
    <circle cx="70" cy="65" r="12" fill="white" stroke="#e74c3c" stroke-width="1"/>
    <text x="70" y="69" font-family="Arial" font-size="10" text-anchor="middle">u</text>
    <circle cx="100" cy="65" r="12" fill="white" stroke="#e74c3c" stroke-width="1"/>
    <text x="100" y="69" font-family="Arial" font-size="10" text-anchor="middle">u</text>
    <text x="70" y="92" font-family="Arial" font-size="7" fill="#666" text-anchor="middle">Followers</text>
  </g>
  <g transform="translate(0, 150)">
    <text x="20" y="10" font-family="Arial" font-size="9" font-weight="bold" fill="#3498db">1. Follow</text>
    <rect x="20" y="20" width="100" height="40" rx="4" fill="white" stroke="#3498db" stroke-width="1"/>
    <text x="70" y="35" font-family="monospace" font-size="7" fill="#3498db" text-anchor="middle">POST /inbox</text>
    <text x="70" y="48" font-family="monospace" font-size="7" fill="#666" text-anchor="middle">{"type": "Follow"}</text>
    <line x1="125" y1="40" x2="155" y2="40" stroke="#3498db" stroke-width="1.5" marker-end="url(#arrow-blue)"/>
    <rect x="160" y="20" width="80" height="40" rx="4" fill="#e8f4fd" stroke="#3498db" stroke-width="1"/>
    <text x="200" y="35" font-family="Arial" font-size="8" fill="#3498db" text-anchor="middle">Accept</text>
    <text x="200" y="48" font-family="Arial" font-size="7" fill="#666" text-anchor="middle">Store follower</text>
  </g>
  <g transform="translate(250, 150)">
    <text x="20" y="10" font-family="Arial" font-size="9" font-weight="bold" fill="#27ae60">2. Publish</text>
    <rect x="20" y="20" width="100" height="40" rx="4" fill="#e8f8e8" stroke="#27ae60" stroke-width="1"/>
    <text x="70" y="35" font-family="Arial" font-size="8" fill="#27ae60" text-anchor="middle">New Post</text>
    <text x="70" y="48" font-family="monospace" font-size="7" fill="#666" text-anchor="middle">Create Article</text>
    <line x1="125" y1="40" x2="155" y2="40" stroke="#27ae60" stroke-width="1.5" marker-end="url(#arrow-green)"/>
    <rect x="160" y="20" width="80" height="40" rx="4" fill="white" stroke="#27ae60" stroke-width="1"/>
    <text x="200" y="35" font-family="monospace" font-size="7" fill="#27ae60" text-anchor="middle">POST /inbox</text>
    <text x="200" y="48" font-family="Arial" font-size="7" fill="#666" text-anchor="middle">to each follower</text>
  </g>
  <g transform="translate(170, 215)">
    <rect x="0" y="0" width="160" height="45" rx="6" fill="white" stroke="#999" stroke-width="1"/>
    <text x="80" y="15" font-family="Arial" font-size="8" font-weight="bold" fill="#333" text-anchor="middle">State (JSON files)</text>
    <text x="80" y="28" font-family="monospace" font-size="7" fill="#666" text-anchor="middle">followers.json | published.json</text>
    <text x="80" y="40" font-family="Arial" font-size="7" fill="#999" text-anchor="middle">No database required</text>
  </g>
</svg>
