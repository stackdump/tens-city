<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1" name="viewport"/>
    <title>Permalink Anchor Integration Test</title>
    <script src="tens-city.js" type="module"></script>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: system-ui, -apple-system, "Segoe UI", Roboto, sans-serif;
            background: #f5f5f5;
        }
        .test-section {
            background: white;
            padding: 20px;
            margin-bottom: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        h1 {
            margin-top: 0;
        }
        .instructions {
            background: #e3f2fd;
            padding: 15px;
            border-left: 4px solid #2196f3;
            margin: 15px 0;
        }
        .instructions ol {
            margin: 10px 0;
        }
        .component-container {
            height: 600px;
            border: 2px solid #e1e4e8;
            border-radius: 8px;
            overflow: hidden;
        }
        .expected-behavior {
            background: #f1f8e9;
            padding: 15px;
            border-left: 4px solid #8bc34a;
            margin: 15px 0;
        }
        .expected-behavior h3 {
            margin-top: 0;
        }
        code {
            background: #f5f5f5;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: monospace;
        }
    </style>
</head>
<body>
    <div class="test-section">
        <h1>ðŸ”— Permalink Anchor Integration Test</h1>
        
        <div class="instructions">
            <h3>Test Instructions:</h3>
            <ol>
                <li><strong>Login:</strong> Click "Login with GitHub" (or continue if already logged in)</li>
                <li><strong>Observe Permalink:</strong> Look at the "ðŸ”— Permalink" link in the toolbar</li>
                <li><strong>Edit JSON:</strong> Make changes to the JSON in the editor</li>
                <li><strong>Verify Update:</strong> Hover over or right-click the permalink link to see the URL updates in real-time</li>
                <li><strong>Test Link:</strong> Click the permalink link - it should open a new tab with the current data</li>
                <li><strong>Verify Load:</strong> In the new tab, the data from the URL should load into the editor</li>
            </ol>
        </div>

        <div class="expected-behavior">
            <h3>Expected Behavior:</h3>
            <ul>
                <li>âœ“ Permalink is an <code>&lt;a&gt;</code> tag, not a button</li>
                <li>âœ“ Permalink href updates automatically as you type (when JSON is valid)</li>
                <li>âœ“ Clicking permalink opens a new tab/window with data in URL</li>
                <li>âœ“ New tab automatically loads data from URL into editor</li>
                <li>âœ“ Script tag is created with the loaded data</li>
                <li>âœ“ No clipboard copy alerts or prompts</li>
            </ul>
        </div>
    </div>

    <div class="test-section">
        <h2>Test with Sample Data</h2>
        <p>This instance loads with sample data from a URL parameter:</p>
        <div class="component-container">
            <tens-city></tens-city>
        </div>
    </div>

    <script>
        // Add test data to URL if not already present
        const urlParams = new URLSearchParams(window.location.search);
        if (!urlParams.has('data')) {
            const testData = {
                "@context": "https://pflow.xyz/schema",
                "@type": "TestObject",
                "name": "Permalink Test Data",
                "description": "This data was loaded from URL parameter",
                "timestamp": new Date().toISOString()
            };
            const newUrl = new URL(window.location.href);
            newUrl.searchParams.set('data', encodeURIComponent(JSON.stringify(testData, null, 2)));
            window.history.replaceState({}, '', newUrl.toString());
        }
    </script>
</body>
</html>
