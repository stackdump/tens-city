{
  "@context": "https://pflow.xyz/schema",
  "@type": "PetriNet",
  "@version": "1.1",
  "description": "A 4x4 Sudoku puzzle modeled as a Petri net with ODE-compatible constraint detection. Following the tic-tac-toe pattern: cells have tokens, digit placements create history, and constraint collectors fire when all cells in a row/column/block are filled with unique digits. The 'solved' place accumulates tokens from all 12 constraint collectors (4 rows + 4 columns + 4 blocks).",
  "puzzle": {
    "description": "4x4 Sudoku with ODE-based constraint detection (like tic-tac-toe)",
    "size": 4,
    "block_size": 2,
    "initial_state": [
      [1, 0, 0, 0],
      [0, 0, 2, 0],
      [0, 3, 0, 0],
      [4, 0, 0, 0]
    ],
    "solution": [
      [1, 2, 4, 3],
      [3, 4, 2, 1],
      [2, 3, 1, 4],
      [4, 1, 3, 2]
    ],
    "constraints_count": 12,
    "ode_compatible": true,
    "marking_convention": {
      "description": "Like tic-tac-toe: cell places with tokens are EMPTY (available for moves), without tokens are FILLED (clues)",
      "cell_places": "P## places with initial=[1] are empty cells; initial=[0] are given clues",
      "history_places": "_D#_## places with initial=[1] already have that digit (clues); initial=[0] are to be filled"
    }
  },
  "token": [
    "https://pflow.xyz/tokens/black"
  ],
  "places": {
    "P00": { "@type": "Place", "label": "Cell(0,0)", "initial": [0], "capacity": [1], "x": 100, "y": 100, "_comment": "Clue: digit 1 is here" },
    "P01": { "@type": "Place", "label": "Cell(0,1)", "initial": [1], "capacity": [1], "x": 200, "y": 100, "_comment": "Empty: needs to be filled" },
    "P02": { "@type": "Place", "label": "Cell(0,2)", "initial": [1], "capacity": [1], "x": 300, "y": 100 },
    "P03": { "@type": "Place", "label": "Cell(0,3)", "initial": [1], "capacity": [1], "x": 400, "y": 100 },
    "P10": { "@type": "Place", "label": "Cell(1,0)", "initial": [1], "capacity": [1], "x": 100, "y": 200 },
    "P11": { "@type": "Place", "label": "Cell(1,1)", "initial": [1], "capacity": [1], "x": 200, "y": 200 },
    "P12": { "@type": "Place", "label": "Cell(1,2)", "initial": [0], "capacity": [1], "x": 300, "y": 200 },
    "P13": { "@type": "Place", "label": "Cell(1,3)", "initial": [1], "capacity": [1], "x": 400, "y": 200 },
    "P20": { "@type": "Place", "label": "Cell(2,0)", "initial": [1], "capacity": [1], "x": 100, "y": 300 },
    "P21": { "@type": "Place", "label": "Cell(2,1)", "initial": [0], "capacity": [1], "x": 200, "y": 300 },
    "P22": { "@type": "Place", "label": "Cell(2,2)", "initial": [1], "capacity": [1], "x": 300, "y": 300 },
    "P23": { "@type": "Place", "label": "Cell(2,3)", "initial": [1], "capacity": [1], "x": 400, "y": 300 },
    "P30": { "@type": "Place", "label": "Cell(3,0)", "initial": [0], "capacity": [1], "x": 100, "y": 400, "_comment": "Clue: digit 4" },
    "P31": { "@type": "Place", "label": "Cell(3,1)", "initial": [1], "capacity": [1], "x": 200, "y": 400, "_comment": "Empty" },
    "P32": { "@type": "Place", "label": "Cell(3,2)", "initial": [1], "capacity": [1], "x": 300, "y": 400, "_comment": "Empty" },
    "P33": { "@type": "Place", "label": "Cell(3,3)", "initial": [1], "capacity": [1], "x": 400, "y": 400, "_comment": "Empty" },

    "_D1_00": { "@type": "Place", "label": "Digit1@(0,0)", "initial": [1], "capacity": [1], "x": 500, "y": 100, "_comment": "Clue: cell(0,0)=1 is given" },
    "_D2_01": { "@type": "Place", "label": "Digit2@(0,1)", "initial": [0], "capacity": [1], "x": 550, "y": 100, "_comment": "Solution: will be filled" },
    "_D4_02": { "@type": "Place", "label": "Digit4@(0,2)", "initial": [0], "capacity": [1], "x": 600, "y": 100, "_comment": "Solution: will be filled" },
    "_D3_03": { "@type": "Place", "label": "Digit3@(0,3)", "initial": [0], "capacity": [1], "x": 650, "y": 100, "_comment": "Solution: will be filled" },
    "_D3_10": { "@type": "Place", "label": "Digit3@(1,0)", "initial": [0], "capacity": [1], "x": 500, "y": 200, "_comment": "Solution: will be filled" },
    "_D4_11": { "@type": "Place", "label": "Digit4@(1,1)", "initial": [0], "capacity": [1], "x": 550, "y": 200, "_comment": "Solution: will be filled" },
    "_D2_12": { "@type": "Place", "label": "Digit2@(1,2)", "initial": [1], "capacity": [1], "x": 600, "y": 200, "_comment": "Clue: cell(1,2)=2 is given" },
    "_D1_13": { "@type": "Place", "label": "Digit1@(1,3)", "initial": [0], "capacity": [1], "x": 650, "y": 200, "_comment": "Solution: will be filled" },
    "_D2_20": { "@type": "Place", "label": "Digit2@(2,0)", "initial": [0], "capacity": [1], "x": 500, "y": 300, "_comment": "Solution: will be filled" },
    "_D3_21": { "@type": "Place", "label": "Digit3@(2,1)", "initial": [1], "capacity": [1], "x": 550, "y": 300, "_comment": "Clue: cell(2,1)=3 is given" },
    "_D1_22": { "@type": "Place", "label": "Digit1@(2,2)", "initial": [0], "capacity": [1], "x": 600, "y": 300, "_comment": "Solution: will be filled" },
    "_D4_23": { "@type": "Place", "label": "Digit4@(2,3)", "initial": [0], "capacity": [1], "x": 650, "y": 300, "_comment": "Solution: will be filled" },
    "_D4_30": { "@type": "Place", "label": "Digit4@(3,0)", "initial": [1], "capacity": [1], "x": 500, "y": 400, "_comment": "Clue: cell(3,0)=4 is given" },
    "_D1_31": { "@type": "Place", "label": "Digit1@(3,1)", "initial": [0], "capacity": [1], "x": 550, "y": 400, "_comment": "Solution: will be filled" },
    "_D3_32": { "@type": "Place", "label": "Digit3@(3,2)", "initial": [0], "capacity": [1], "x": 600, "y": 400, "_comment": "Solution: will be filled" },
    "_D2_33": { "@type": "Place", "label": "Digit2@(3,3)", "initial": [0], "capacity": [1], "x": 650, "y": 400, "_comment": "Solution: will be filled" },

    "solved": { "@type": "Place", "label": "Puzzle Solved (accumulates from 12 constraints)", "initial": [0], "capacity": [12], "x": 400, "y": 700 }
  },
  "transitions": {
    "D1_00": { "@type": "Transition", "label": "Place 1 at (0,0)", "role": "d1", "x": 100, "y": 50 },
    "D2_01": { "@type": "Transition", "label": "Place 2 at (0,1)", "role": "d2", "x": 200, "y": 50 },
    "D4_02": { "@type": "Transition", "label": "Place 4 at (0,2)", "role": "d4", "x": 300, "y": 50 },
    "D3_03": { "@type": "Transition", "label": "Place 3 at (0,3)", "role": "d3", "x": 400, "y": 50 },
    "D3_10": { "@type": "Transition", "label": "Place 3 at (1,0)", "role": "d3", "x": 100, "y": 150 },
    "D4_11": { "@type": "Transition", "label": "Place 4 at (1,1)", "role": "d4", "x": 200, "y": 150 },
    "D2_12": { "@type": "Transition", "label": "Place 2 at (1,2)", "role": "d2", "x": 300, "y": 150 },
    "D1_13": { "@type": "Transition", "label": "Place 1 at (1,3)", "role": "d1", "x": 400, "y": 150 },
    "D2_20": { "@type": "Transition", "label": "Place 2 at (2,0)", "role": "d2", "x": 100, "y": 250 },
    "D3_21": { "@type": "Transition", "label": "Place 3 at (2,1)", "role": "d3", "x": 200, "y": 250 },
    "D1_22": { "@type": "Transition", "label": "Place 1 at (2,2)", "role": "d1", "x": 300, "y": 250 },
    "D4_23": { "@type": "Transition", "label": "Place 4 at (2,3)", "role": "d4", "x": 400, "y": 250 },
    "D4_30": { "@type": "Transition", "label": "Place 4 at (3,0)", "role": "d4", "x": 100, "y": 350 },
    "D1_31": { "@type": "Transition", "label": "Place 1 at (3,1)", "role": "d1", "x": 200, "y": 350 },
    "D3_32": { "@type": "Transition", "label": "Place 3 at (3,2)", "role": "d3", "x": 300, "y": 350 },
    "D2_33": { "@type": "Transition", "label": "Place 2 at (3,3)", "role": "d2", "x": 400, "y": 350 },

    "Row0_Complete": { "@type": "Transition", "label": "Row 0 Complete (1,2,4,3)", "role": "constraint", "x": 100, "y": 500 },
    "Row1_Complete": { "@type": "Transition", "label": "Row 1 Complete (3,4,2,1)", "role": "constraint", "x": 200, "y": 500 },
    "Row2_Complete": { "@type": "Transition", "label": "Row 2 Complete (2,3,1,4)", "role": "constraint", "x": 300, "y": 500 },
    "Row3_Complete": { "@type": "Transition", "label": "Row 3 Complete (4,1,3,2)", "role": "constraint", "x": 400, "y": 500 },

    "Col0_Complete": { "@type": "Transition", "label": "Col 0 Complete (1,3,2,4)", "role": "constraint", "x": 100, "y": 550 },
    "Col1_Complete": { "@type": "Transition", "label": "Col 1 Complete (2,4,3,1)", "role": "constraint", "x": 200, "y": 550 },
    "Col2_Complete": { "@type": "Transition", "label": "Col 2 Complete (4,2,1,3)", "role": "constraint", "x": 300, "y": 550 },
    "Col3_Complete": { "@type": "Transition", "label": "Col 3 Complete (3,1,4,2)", "role": "constraint", "x": 400, "y": 550 },

    "Block00_Complete": { "@type": "Transition", "label": "Block(0,0) Complete", "role": "constraint", "x": 150, "y": 600 },
    "Block01_Complete": { "@type": "Transition", "label": "Block(0,1) Complete", "role": "constraint", "x": 350, "y": 600 },
    "Block10_Complete": { "@type": "Transition", "label": "Block(1,0) Complete", "role": "constraint", "x": 150, "y": 650 },
    "Block11_Complete": { "@type": "Transition", "label": "Block(1,1) Complete", "role": "constraint", "x": 350, "y": 650 }
  },
  "arcs": [
    { "@type": "Arrow", "source": "P00", "target": "D1_00", "weight": [1] },
    { "@type": "Arrow", "source": "D1_00", "target": "_D1_00", "weight": [1] },
    { "@type": "Arrow", "source": "P01", "target": "D2_01", "weight": [1] },
    { "@type": "Arrow", "source": "D2_01", "target": "_D2_01", "weight": [1] },
    { "@type": "Arrow", "source": "P02", "target": "D4_02", "weight": [1] },
    { "@type": "Arrow", "source": "D4_02", "target": "_D4_02", "weight": [1] },
    { "@type": "Arrow", "source": "P03", "target": "D3_03", "weight": [1] },
    { "@type": "Arrow", "source": "D3_03", "target": "_D3_03", "weight": [1] },
    { "@type": "Arrow", "source": "P10", "target": "D3_10", "weight": [1] },
    { "@type": "Arrow", "source": "D3_10", "target": "_D3_10", "weight": [1] },
    { "@type": "Arrow", "source": "P11", "target": "D4_11", "weight": [1] },
    { "@type": "Arrow", "source": "D4_11", "target": "_D4_11", "weight": [1] },
    { "@type": "Arrow", "source": "P12", "target": "D2_12", "weight": [1] },
    { "@type": "Arrow", "source": "D2_12", "target": "_D2_12", "weight": [1] },
    { "@type": "Arrow", "source": "P13", "target": "D1_13", "weight": [1] },
    { "@type": "Arrow", "source": "D1_13", "target": "_D1_13", "weight": [1] },
    { "@type": "Arrow", "source": "P20", "target": "D2_20", "weight": [1] },
    { "@type": "Arrow", "source": "D2_20", "target": "_D2_20", "weight": [1] },
    { "@type": "Arrow", "source": "P21", "target": "D3_21", "weight": [1] },
    { "@type": "Arrow", "source": "D3_21", "target": "_D3_21", "weight": [1] },
    { "@type": "Arrow", "source": "P22", "target": "D1_22", "weight": [1] },
    { "@type": "Arrow", "source": "D1_22", "target": "_D1_22", "weight": [1] },
    { "@type": "Arrow", "source": "P23", "target": "D4_23", "weight": [1] },
    { "@type": "Arrow", "source": "D4_23", "target": "_D4_23", "weight": [1] },
    { "@type": "Arrow", "source": "P30", "target": "D4_30", "weight": [1] },
    { "@type": "Arrow", "source": "D4_30", "target": "_D4_30", "weight": [1] },
    { "@type": "Arrow", "source": "P31", "target": "D1_31", "weight": [1] },
    { "@type": "Arrow", "source": "D1_31", "target": "_D1_31", "weight": [1] },
    { "@type": "Arrow", "source": "P32", "target": "D3_32", "weight": [1] },
    { "@type": "Arrow", "source": "D3_32", "target": "_D3_32", "weight": [1] },
    { "@type": "Arrow", "source": "P33", "target": "D2_33", "weight": [1] },
    { "@type": "Arrow", "source": "D2_33", "target": "_D2_33", "weight": [1] },

    { "@type": "Arrow", "source": "_D1_00", "target": "Row0_Complete", "weight": [1] },
    { "@type": "Arrow", "source": "_D2_01", "target": "Row0_Complete", "weight": [1] },
    { "@type": "Arrow", "source": "_D4_02", "target": "Row0_Complete", "weight": [1] },
    { "@type": "Arrow", "source": "_D3_03", "target": "Row0_Complete", "weight": [1] },
    { "@type": "Arrow", "source": "_D3_10", "target": "Row1_Complete", "weight": [1] },
    { "@type": "Arrow", "source": "_D4_11", "target": "Row1_Complete", "weight": [1] },
    { "@type": "Arrow", "source": "_D2_12", "target": "Row1_Complete", "weight": [1] },
    { "@type": "Arrow", "source": "_D1_13", "target": "Row1_Complete", "weight": [1] },
    { "@type": "Arrow", "source": "_D2_20", "target": "Row2_Complete", "weight": [1] },
    { "@type": "Arrow", "source": "_D3_21", "target": "Row2_Complete", "weight": [1] },
    { "@type": "Arrow", "source": "_D1_22", "target": "Row2_Complete", "weight": [1] },
    { "@type": "Arrow", "source": "_D4_23", "target": "Row2_Complete", "weight": [1] },
    { "@type": "Arrow", "source": "_D4_30", "target": "Row3_Complete", "weight": [1] },
    { "@type": "Arrow", "source": "_D1_31", "target": "Row3_Complete", "weight": [1] },
    { "@type": "Arrow", "source": "_D3_32", "target": "Row3_Complete", "weight": [1] },
    { "@type": "Arrow", "source": "_D2_33", "target": "Row3_Complete", "weight": [1] },

    { "@type": "Arrow", "source": "_D1_00", "target": "Col0_Complete", "weight": [1] },
    { "@type": "Arrow", "source": "_D3_10", "target": "Col0_Complete", "weight": [1] },
    { "@type": "Arrow", "source": "_D2_20", "target": "Col0_Complete", "weight": [1] },
    { "@type": "Arrow", "source": "_D4_30", "target": "Col0_Complete", "weight": [1] },
    { "@type": "Arrow", "source": "_D2_01", "target": "Col1_Complete", "weight": [1] },
    { "@type": "Arrow", "source": "_D4_11", "target": "Col1_Complete", "weight": [1] },
    { "@type": "Arrow", "source": "_D3_21", "target": "Col1_Complete", "weight": [1] },
    { "@type": "Arrow", "source": "_D1_31", "target": "Col1_Complete", "weight": [1] },
    { "@type": "Arrow", "source": "_D4_02", "target": "Col2_Complete", "weight": [1] },
    { "@type": "Arrow", "source": "_D2_12", "target": "Col2_Complete", "weight": [1] },
    { "@type": "Arrow", "source": "_D1_22", "target": "Col2_Complete", "weight": [1] },
    { "@type": "Arrow", "source": "_D3_32", "target": "Col2_Complete", "weight": [1] },
    { "@type": "Arrow", "source": "_D3_03", "target": "Col3_Complete", "weight": [1] },
    { "@type": "Arrow", "source": "_D1_13", "target": "Col3_Complete", "weight": [1] },
    { "@type": "Arrow", "source": "_D4_23", "target": "Col3_Complete", "weight": [1] },
    { "@type": "Arrow", "source": "_D2_33", "target": "Col3_Complete", "weight": [1] },

    { "@type": "Arrow", "source": "_D1_00", "target": "Block00_Complete", "weight": [1] },
    { "@type": "Arrow", "source": "_D2_01", "target": "Block00_Complete", "weight": [1] },
    { "@type": "Arrow", "source": "_D3_10", "target": "Block00_Complete", "weight": [1] },
    { "@type": "Arrow", "source": "_D4_11", "target": "Block00_Complete", "weight": [1] },
    { "@type": "Arrow", "source": "_D4_02", "target": "Block01_Complete", "weight": [1] },
    { "@type": "Arrow", "source": "_D3_03", "target": "Block01_Complete", "weight": [1] },
    { "@type": "Arrow", "source": "_D2_12", "target": "Block01_Complete", "weight": [1] },
    { "@type": "Arrow", "source": "_D1_13", "target": "Block01_Complete", "weight": [1] },
    { "@type": "Arrow", "source": "_D2_20", "target": "Block10_Complete", "weight": [1] },
    { "@type": "Arrow", "source": "_D3_21", "target": "Block10_Complete", "weight": [1] },
    { "@type": "Arrow", "source": "_D4_30", "target": "Block10_Complete", "weight": [1] },
    { "@type": "Arrow", "source": "_D1_31", "target": "Block10_Complete", "weight": [1] },
    { "@type": "Arrow", "source": "_D1_22", "target": "Block11_Complete", "weight": [1] },
    { "@type": "Arrow", "source": "_D4_23", "target": "Block11_Complete", "weight": [1] },
    { "@type": "Arrow", "source": "_D3_32", "target": "Block11_Complete", "weight": [1] },
    { "@type": "Arrow", "source": "_D2_33", "target": "Block11_Complete", "weight": [1] },

    { "@type": "Arrow", "source": "Row0_Complete", "target": "solved", "weight": [1] },
    { "@type": "Arrow", "source": "Row1_Complete", "target": "solved", "weight": [1] },
    { "@type": "Arrow", "source": "Row2_Complete", "target": "solved", "weight": [1] },
    { "@type": "Arrow", "source": "Row3_Complete", "target": "solved", "weight": [1] },
    { "@type": "Arrow", "source": "Col0_Complete", "target": "solved", "weight": [1] },
    { "@type": "Arrow", "source": "Col1_Complete", "target": "solved", "weight": [1] },
    { "@type": "Arrow", "source": "Col2_Complete", "target": "solved", "weight": [1] },
    { "@type": "Arrow", "source": "Col3_Complete", "target": "solved", "weight": [1] },
    { "@type": "Arrow", "source": "Block00_Complete", "target": "solved", "weight": [1] },
    { "@type": "Arrow", "source": "Block01_Complete", "target": "solved", "weight": [1] },
    { "@type": "Arrow", "source": "Block10_Complete", "target": "solved", "weight": [1] },
    { "@type": "Arrow", "source": "Block11_Complete", "target": "solved", "weight": [1] }
  ]
}
